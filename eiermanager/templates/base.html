<!doctype html>
<html lang="de">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{% block title %}FarmManager{% endblock %}</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/farm.css') }}">
</head>
<body>
<div class="fm-shell">
    <div class="fm-center">

        <!-- Flash-Messages -->
        <div class="container-sm mb-3" style="max-width:820px;">
            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            {% for category, message in messages %}
            <div class="alert alert-{{ 'warning' if category=='message' else category }} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Schließen"></button>
            </div>
            {% endfor %}
            {% endif %}
            {% endwith %}
        </div>

        <!-- Seiteninhalt -->
        {% block content %}{% endblock %}

        <!-- Footer -->
        <footer class="fm-foot mt-4">&copy; {{ 2025 }} FarmManager</footer>
    </div>
</div>

<!-- Dein bestehender Link bleibt sichtbar identisch -->
<a id="logout-link" href="{{ url_for('benutzer.logout') }}" class="btn btn-outline">Abmelden</a>

<!-- Unsichtbares POST-Formular für Logout -->
<form id="logout-form" action="{{ url_for('benutzer.logout') }}" method="POST" style="display:none;"></form>

<script>
    // Klick auf Link → POST absenden (keine Optik-Änderung)
    (function() {
        const link = document.getElementById('logout-link');
        const form = document.getElementById('logout-form');
        if (link && form) {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                form.submit();
            });
        }
    })();
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
